var h=Object.defineProperty;var p=t=>{throw TypeError(t)};var v=(t,r,e)=>r in t?h(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var n=(t,r,e)=>v(t,typeof r!="symbol"?r+"":r,e),f=(t,r,e)=>r.has(t)||p("Cannot "+e);var b=(t,r,e)=>r.has(t)?p("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,e);var c=(t,r,e)=>(f(t,r,"access private method"),e);var l,u;class m extends HTMLElement{constructor(e={}){super();b(this,l);n(this,"options",{template:null,mode:"open",attachShadow:!0});if(this.options={...this.options,...e},this.options.attachShadow&&this.attachShadow({mode:this.options.mode}),this.options.template){let a=document.createElement("template");a.innerHTML=this.options.template,this.shadowRoot.appendChild(a.content.cloneNode(!0))}}static create(e={}){if(!this.tagName)throw new Error("tagName is not defined");return new this(e)}setSlotContent(e,a){let s=c(this,l,u).call(this,e);return s?(s.innerHTML="",s.appendChild(a),!0):!1}setSlotTextContent(e,a){let s=c(this,l,u).call(this,e);return s?(s.textContent=a,!0):!1}handleEvent(e){let a=e.type.charAt(0).toUpperCase()+e.type.slice(1);typeof this[`handle${a}`]=="function"?this[`handle${a}`](e):console.error(`No handler for event ${e.type}`)}}l=new WeakSet,u=function(e){let a=this.shadowRoot.querySelector(`slot[name="${e}"]`);return a||(console.error(`Slot ${e} does not exist`),null)};const k=`<slot name="upper-text"></slot>\r
<slot name="lower-text"></slot>\r
\r
<style>\r
    :host {\r
        --font-size-paragraph-small: 0.8rem;\r
        --font-size-paragraph: 1rem;\r
\r
        position: absolute;\r
        top: -10px;\r
        left: -10px;\r
        right: -10px;\r
        bottom: -10px;\r
        background: rgba(255, 255, 255, 0.8);\r
\r
        display: none;\r
        grid-template-rows: 1fr var(--font-size-paragraph) 100px var(--font-size-paragraph) 1fr;\r
        grid-template-columns: 1fr 100px 1fr;\r
        grid-template-areas: "topl topc topr" "uppertextl uppertextc uppertextr" "imagel imagec imager" "lowertextl lowertextc lowertextr" "bottoml bottomc bottomr";\r
        gap: 0;\r
        padding: 0;\r
\r
        &:before {\r
            content: '';\r
            grid-area: imagec;\r
            height: 100px;\r
            width: 100px;\r
        }\r
    }\r
\r
    :host(.populated) {\r
        display: grid;\r
    }\r
\r
    slot[name="upper-text"] {\r
        grid-area: uppertextc;\r
        grid-column-start: uppertextl;\r
        grid-column-end: uppertextr;\r
    }\r
\r
    slot[name="lower-text"] {\r
        grid-area: lowertextc;\r
        grid-column-start: lowertextl;\r
        grid-column-end: lowertextr;\r
    }\r
\r
    slot[name="upper-text"],\r
    slot[name="lower-text"] {\r
        display: block;\r
        text-align: center;\r
        align-self: center;\r
        font-size: var(--font-size-paragraph-small);\r
        text-wrap: nowrap;\r
        animation: dnFadeInOutRepeat 2.5s infinite;\r
\r
        p {\r
            padding: 0;\r
            margin: 0;\r
            font-size: var(--font-size-paragraph-small);\r
        }\r
    }\r
</style>`;class i extends m{constructor(e={}){super({template:k,...e});n(this,"messages",[]);n(this,"messagePosition","lower");n(this,"currentMessage",null);n(this,"messageClass","dn-loading-overlay__message");n(this,"cycleSpeed",5e3);n(this,"cycleMessagesInterval",null);let a=this.dataset.messages?JSON.parse(this.dataset.messages):[];if(this.messagePosition=this.dataset.messagePosition?this.dataset.messagePosition:"lower",this.cycleSpeed=this.dataset.cycleSpeed?this.dataset.cycleSpeed:5e3,a.length===0)return;let s=this;a.forEach(o=>{s.addMessage(o)})}startInterval(){let e=this;this.displayNextMessage(),this.cycleMessagesInterval=setInterval(function(){e.displayNextMessage()},this.cycleSpeed)}getNextMessage(){const a=(this.messages.indexOf(this.currentMessage)+1)%this.messages.length;return this.messages[a]}clearMessage(){let e=this.querySelector(`.${this.messageClass}`);e&&e.remove()}displayNextMessage(){this.currentMessage=this.getNextMessage(),this.clearMessage();let e=document.createElement("div");e.classList.add(this.messageClass),e.slot=this.messagePosition==="upper"?"upper-text":"lower-text",e.textContent=this.currentMessage,this.appendChild(e)}deleteMessage(e){const a=this.messages.indexOf(e);this.messages.splice(a,1),this.messages.length===0&&(this.classList.remove("populated"),clearInterval(this.cycleMessagesInterval),this.remove())}addMessage(e){this.classList.add("populated"),this.messages.indexOf(e)===-1&&(this.messages.push(e),this.cycleMessagesInterval||this.startInterval())}}n(i,"tagName","digital-nature-loading-overlay");customElements.define(i.tagName,i);const w=`<div class="message-container" title="Click to dismiss this message">\r
    <slot name="message"></slot>\r
</div>\r
<slot name="dismiss-button">\r
    <button></button>\r
</slot>\r
\r
\r
\r
\r
\r
\r
\r
<style>\r
    :host {\r
        --message-background-colour: #FFF;\r
        --message-border-colour: #000;\r
        --message-border-radius: 0.5rem;\r
        --message-border-width: 2px;\r
        --message-border-style: solid;\r
        --message-font-weight: 400;\r
        --message-margin: 1rem 0;\r
        --message-grid-size: 3rem auto 30px;\r
        --message-grid-rows: auto;\r
        --message-grid-areas: "icon message close";\r
        --message-grid-areas-gap: 1rem;\r
        --message-cursor: pointer;\r
        --message-font-size: 1rem;\r
\r
        --button-background-colour: #FFF;\r
        --button-background-size: 20px;\r
        --button-image-background-url: url(assets/img/close.svg);\r
        --button-image-background-repeat: no-repeat;\r
        --button-image-background-position: center center;\r
        --button-opacity: 0.5;\r
\r
        --default-image-background-colour: #000;\r
        --default-image-background-url: unset;\r
        --default-image-background-repeat: no-repeat;\r
        --default-image-background-position: center center;\r
        --default-image-background-size: auto;\r
        --default-border-colour: #000;\r
        --default-font-colour: #000;\r
\r
        display: grid;\r
        grid-template-columns: var(--message-grid-size);\r
        grid-template-rows: var(--message-grid-rows);\r
        grid-template-areas: var(--message-grid-areas);\r
        align-items: center;\r
        gap: var(--message-grid-areas-gap);\r
        position: relative;\r
        cursor: var(--message-cursor);\r
\r
        background: var(--message-background-colour);\r
        font-size: var(--message-font-size);\r
        border: var(--message-border-width) var(--message-border-style) var(--message-border-colour);\r
        border-radius: var(--message-border-radius);\r
        color: var(--default-font-colour);\r
        padding: 0;\r
        overflow: hidden;\r
        margin: var(--message-margin);\r
        font-weight: var(--message-font-weight);\r
\r
        &:before {\r
            grid-area: icon;\r
            content: "";\r
            display: block;\r
            aspect-ratio: 1 / 1;\r
            height: calc(100% - (2 * var(--message-border-width)));\r
            max-width: 100%;\r
            background-color: var(--default-image-background-colour);\r
            background-image: var(--default-image-background-url);\r
            background-repeat: var(--default-image-background-repeat);\r
            background-position: var(--default-image-background-position);\r
            background-size: 1em;\r
            border: var(--message-border-width) solid var(--default-border-colour);\r
            border-radius: var(--message-border-radius);\r
        }\r
    }\r
\r
    :host(:hover) {\r
        slot[name="dismiss-button"] {\r
            button {\r
                opacity: 1;\r
            }\r
        }\r
    }\r
\r
    :host(.success) {\r
        border-color: var(--success-border-colour, var(--default-border-colour));\r
        color: var(--success-font-colour, var(--default-font-colour));\r
\r
        &:before {\r
            background-color: var(--success-image-background-colour, var(--default-image-background-colour));\r
            background-image: var(--success-image-background-url, var(--default-image-background-url));\r
            background-repeat: var(--success-image-background-repeat, var(--default-image-background-repeat));\r
            background-position: var(--success-image-background-position, var(--default-image-background-position));\r
            background-size: var(--success-image-background-size, var(--default-image-background-size));\r
        }\r
    }\r
\r
\r
    :host(.error) {\r
        border-color: var(--error-border-colour, var(--default-border-colour));\r
        color: var(--error-font-colour, var(--default-font-colour));\r
\r
        &:before {\r
            background-color: var(--error-image-background-colour, var(--default-image-background-colour));\r
            background-image: var(--error-image-background-url, var(--default-image-background-url));\r
            background-repeat: var(--error-image-background-repeat, var(--default-image-background-repeat));\r
            background-position: var(--error-image-background-position, var(--default-image-background-position));\r
            background-size: var(--error-image-background-size, var(--default-image-background-size));\r
        }\r
    }\r
\r
    :host(.warning) {\r
        border-color: var(--warning-border-colour, var(--default-border-colour));\r
        color: var(--warning-font-colour, var(--default-font-colour));\r
\r
        &:before {\r
            background-color: var(--warning-image-background-colour, var(--default-image-background-colour));\r
            background-image: var(--warning-image-background-url, var(--default-image-background-url));\r
            background-repeat: var(--warning-image-background-repeat, var(--default-image-background-repeat));\r
            background-position: var(--warning-image-background-position, var(--default-image-background-position));\r
            background-size: var(--warning-image-background-size, var(--default-image-background-size));\r
        }\r
    }\r
\r
    :host(.info) {\r
        border-color: var(--info-border-colour, var(--default-border-colour));\r
        color: var(--info-font-colour, var(--default-font-colour));\r
\r
        &:before {\r
            background-color: var(--info-image-background-colour, var(--default-image-background-colour));\r
            background-image: var(--info-image-background-url, var(--default-image-background-url));\r
            background-repeat: var(--info-image-background-repeat, var(--default-image-background-repeat));\r
            background-position: var(--info-image-background-position, var(--default-image-background-position));\r
            background-size: var(--info-image-background-size, var(--default-image-background-size));\r
        }\r
    }\r
\r
    .message-container {\r
        padding: 1rem 0;\r
        grid-area: message;\r
    }\r
\r
    slot[name="dismiss-button"] {\r
        grid-area: close;\r
\r
        &:hover {\r
            button {\r
                opacity: 1;\r
            }\r
        }\r
\r
        button {\r
            border: none;\r
            cursor: pointer;\r
            font-size: 0;\r
            width: 100%;\r
            height: 100%;\r
            padding: 0;\r
            background: var(--button-background-colour);\r
            background-image: var(--button-image-background-url);\r
            background-repeat: var(--button-image-background-repeat);\r
            background-position: var(--button-image-background-position);\r
            background-size: var(--button-background-size);\r
            opacity: var(--button-opacity);\r
        }\r
    }\r
\r
</style>`;class d extends m{constructor(r={}){super({template:w,...r}),this.addEventListener("click",this)}handleClick(r){this.remove()}}n(d,"tagName","digital-nature-dismissable-message");customElements.define(d.tagName,d);const x=`<div class="digital-nature-admin-wrap">\r
    <link rel="stylesheet" href="https://sandbox.local/wp-content/plugins/dn-utilities/assets/admin/css/admin.css" media="all">\r
    <link rel="stylesheet" href="https://sandbox.local/wp-content/plugins/dn-utilities/assets/common/css/common.css" media="all">\r
    <link rel="stylesheet" href="https://sandbox.local/wp-content/plugins/dn-tools-for-klaviyo/assets/admin/css/admin.css" media="all">\r
\r
    <label for="klaviyo-event-create-test-event-name">Event Name</label>\r
    <input type="text" name="event-name" value="A test event" id="klaviyo-event-create-test-event-name" />\r
    <button id="klaviyo-event-create-test-submit" type="submit">Test</button>\r
\r
    <digital-nature-dismissable-message class="success">\r
        <p slot="message">This is a dismissable message but the styling has gone to turd. It also has no background image. The css vars are in the dn-utilities plugin, find out what the problem is</p>\r
    </digital-nature-dismissable-message>\r
</div>`;class g extends m{constructor(){super({template:x});const r=this.shadowRoot.getElementById("klaviyo-event-create-test-submit"),e=this.shadowRoot.getElementById("klaviyo-event-create-test-event-name");r.addEventListener("click",()=>{this.setAttribute("event-name",e.value),this.runTest().then(a=>{})})}async runTest(){let r=["Sending data, please wait...","Processing your request..."],e=i.create();this.shadowRoot.querySelectorAll(i.tagName).forEach(o=>o.remove()),this.shadowRoot.appendChild(e),r.forEach(o=>e.addMessage(o));let a=await window.DigitalNature.utils.request.post("/wp-json/tools-for-klaviyo/v1/events",{event:this.getAttribute("event-name"),"event-data":{send:"success"}});console.log("Response is",a),r.forEach(o=>e.deleteMessage(o));let s=d.create();s.setSlotTextContent("message","Success! Your event was sent to Klaviyo!"),this.shadowRoot.appendChild(s)}}n(g,"tagName","tools-for-klaviyo-test-event-create"),n(g,"observedAttributes",["event-name"]);customElements.define(g.tagName,g);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRtaW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2J1aWxkL25vZGVfbW9kdWxlcy9AZGlnaXRhbC1uYXR1cmUtbHRkL3dlYi1jb21wb25lbnQvZGlnaXRhbC1uYXR1cmUtd2ViLWNvbXBvbmVudC5qcyIsIi4uLy4uLy4uLy4uL2J1aWxkL25vZGVfbW9kdWxlcy9AZGlnaXRhbC1uYXR1cmUtbHRkL2xvYWRpbmctb3ZlcmxheS1jb21wb25lbnQvZGlnaXRhbC1uYXR1cmUtbG9hZGluZy1vdmVybGF5LWNvbXBvbmVudC10ZW1wbGF0ZS5odG1sP3JhdyIsIi4uLy4uLy4uLy4uL2J1aWxkL25vZGVfbW9kdWxlcy9AZGlnaXRhbC1uYXR1cmUtbHRkL2xvYWRpbmctb3ZlcmxheS1jb21wb25lbnQvZGlnaXRhbC1uYXR1cmUtbG9hZGluZy1vdmVybGF5LWNvbXBvbmVudC5qcyIsIi4uLy4uLy4uLy4uL2J1aWxkL25vZGVfbW9kdWxlcy9AZGlnaXRhbC1uYXR1cmUtbHRkL2Rpc21pc3NhYmxlLW1lc3NhZ2UtY29tcG9uZW50L2RpZ2l0YWwtbmF0dXJlLWRpc21pc3NhYmxlLW1lc3NhZ2UtY29tcG9uZW50LXRlbXBsYXRlLmh0bWw/cmF3IiwiLi4vLi4vLi4vLi4vYnVpbGQvbm9kZV9tb2R1bGVzL0BkaWdpdGFsLW5hdHVyZS1sdGQvZGlzbWlzc2FibGUtbWVzc2FnZS1jb21wb25lbnQvZGlnaXRhbC1uYXR1cmUtZGlzbWlzc2FibGUtbWVzc2FnZS1jb21wb25lbnQuanMiLCIuLi8uLi8uLi8uLi9idWlsZC9hc3NldHMvYWRtaW4vanMvd2ViLWNvbXBvbmVudHMvdGVzdC1ldmVudC1jcmVhdGUtY29tcG9uZW50L3Rlc3QtZXZlbnQtY3JlYXRlLWNvbXBvbmVudC10ZW1wbGF0ZS5odG1sP3JhdyIsIi4uLy4uLy4uLy4uL2J1aWxkL2Fzc2V0cy9hZG1pbi9qcy93ZWItY29tcG9uZW50cy90ZXN0LWV2ZW50LWNyZWF0ZS1jb21wb25lbnQvdGVzdC1ldmVudC1jcmVhdGUtY29tcG9uZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpZ2l0YWxOYXR1cmVXZWJDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudFxyXG57XHJcbiAgICBvcHRpb25zID0ge1xyXG4gICAgICAgIHRlbXBsYXRlOiBudWxsLFxyXG4gICAgICAgIG1vZGU6ICdvcGVuJyxcclxuICAgICAgICBhdHRhY2hTaGFkb3c6IHRydWUsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgLy8gbWVyZ2UgaW4gbmV3IG9wdGlvbnNcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7Li4udGhpcy5vcHRpb25zLCAuLi5vcHRpb25zfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdHRhY2hTaGFkb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6IHRoaXMub3B0aW9ucy5tb2RlfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgdGVtcGxhdGUgYW5kIGF0dGFjaCBzaGFkb3cgZG9tIHdpdGggdGhhdCBjb250ZW50XHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLnRlbXBsYXRlO1xyXG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGVFbGVtZW50LmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZShvcHRpb25zID0ge30pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRhZ05hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0YWdOYW1lIGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IHRoaXMob3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjb250ZW50cyBvZiB0aGUgc2xvdCB0byB0aGUgZ2l2ZW4gZWxlbWVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzbG90TmFtZVxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBzZXRTbG90Q29udGVudChzbG90TmFtZSwgZWxlbWVudClcclxuICAgIHtcclxuICAgICAgICBsZXQgc2xvdCA9IHRoaXMuI2dldFNsb3RCeU5hbWUoc2xvdE5hbWUpO1xyXG5cclxuICAgICAgICBpZiAoIXNsb3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xlYXIgaXRcclxuICAgICAgICBzbG90LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIC8vIGFkZCBuZXcgY29udGVudFxyXG4gICAgICAgIHNsb3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dENvbnRlbnQgYXR0cmlidXRlIG9mIHRoZSBzbG90IHRvIHRoZSBnaXZlbiB2YWx1ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzbG90TmFtZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRcclxuICAgICAqIEByZXR1cm4gYm9vbGVhblxyXG4gICAgICovXHJcbiAgICBzZXRTbG90VGV4dENvbnRlbnQoc2xvdE5hbWUsIGNvbnRlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHNsb3QgPSB0aGlzLiNnZXRTbG90QnlOYW1lKHNsb3ROYW1lKTtcclxuXHJcbiAgICAgICAgaWYgKCFzbG90KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNsb3QudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzbG90TmFtZVxyXG4gICAgICogQHJldHVybiBudWxsfEhUTUxFbGVtZW50XHJcbiAgICAgKi9cclxuICAgICNnZXRTbG90QnlOYW1lKHNsb3ROYW1lKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBzbG90ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoYHNsb3RbbmFtZT1cIiR7c2xvdE5hbWV9XCJdYCk7XHJcblxyXG4gICAgICAgIGlmICghc2xvdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBTbG90ICR7c2xvdE5hbWV9IGRvZXMgbm90IGV4aXN0YCk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNsb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGxvd3Mgc2ltcGxlIGhhbmRsaW5nIG9mIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBJZiBhIGhhbmRsZXIgZXhpc3RzIGZvciB0aGUgZXZlbnQgdHlwZSwgdGhlbiBpdCB3aWxsIGJlIGNhbGxlZC5cclxuICAgICAqIElmIG5vdCwgdGhlbiBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZXZlbnQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGhhbmRsZXIuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGhhbmRsZXIgc2hvdWxkIGJlIG5hbWVkIGBoYW5kbGU8RXZlbnRUeXBlPmAgd2hlcmUgRXZlbnRUeXBlIGlzIHRoZVxyXG4gICAgICogZXZlbnQgdHlwZSBpbiBjYW1lbCBjYXNlIC0gZS5nLiBoYW5kbGVDbGljaywgaGFuZGxlS2V5ZG93biwgaGFuZGxlU2Nyb2xsIGV0Yy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2V2ZW50fSBldmVudFxyXG4gICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IGNhcGl0YWxpc2VkRXZlbnRUeXBlID0gZXZlbnQudHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGV2ZW50LnR5cGUuc2xpY2UoMSk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpc1tgaGFuZGxlJHtjYXBpdGFsaXNlZEV2ZW50VHlwZX1gXSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHRoaXNbYGhhbmRsZSR7Y2FwaXRhbGlzZWRFdmVudFR5cGV9YF0oZXZlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE5vIGhhbmRsZXIgZm9yIGV2ZW50ICR7ZXZlbnQudHlwZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IFwiPHNsb3QgbmFtZT1cXFwidXBwZXItdGV4dFxcXCI+PC9zbG90PlxcclxcbjxzbG90IG5hbWU9XFxcImxvd2VyLXRleHRcXFwiPjwvc2xvdD5cXHJcXG5cXHJcXG48c3R5bGU+XFxyXFxuICAgIDpob3N0IHtcXHJcXG4gICAgICAgIC0tZm9udC1zaXplLXBhcmFncmFwaC1zbWFsbDogMC44cmVtO1xcclxcbiAgICAgICAgLS1mb250LXNpemUtcGFyYWdyYXBoOiAxcmVtO1xcclxcblxcclxcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgICAgICAgdG9wOiAtMTBweDtcXHJcXG4gICAgICAgIGxlZnQ6IC0xMHB4O1xcclxcbiAgICAgICAgcmlnaHQ6IC0xMHB4O1xcclxcbiAgICAgICAgYm90dG9tOiAtMTBweDtcXHJcXG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcXHJcXG5cXHJcXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XFxyXFxuICAgICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciB2YXIoLS1mb250LXNpemUtcGFyYWdyYXBoKSAxMDBweCB2YXIoLS1mb250LXNpemUtcGFyYWdyYXBoKSAxZnI7XFxyXFxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxMDBweCAxZnI7XFxyXFxuICAgICAgICBncmlkLXRlbXBsYXRlLWFyZWFzOiBcXFwidG9wbCB0b3BjIHRvcHJcXFwiIFxcXCJ1cHBlcnRleHRsIHVwcGVydGV4dGMgdXBwZXJ0ZXh0clxcXCIgXFxcImltYWdlbCBpbWFnZWMgaW1hZ2VyXFxcIiBcXFwibG93ZXJ0ZXh0bCBsb3dlcnRleHRjIGxvd2VydGV4dHJcXFwiIFxcXCJib3R0b21sIGJvdHRvbWMgYm90dG9tclxcXCI7XFxyXFxuICAgICAgICBnYXA6IDA7XFxyXFxuICAgICAgICBwYWRkaW5nOiAwO1xcclxcblxcclxcbiAgICAgICAgJjpiZWZvcmUge1xcclxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xcclxcbiAgICAgICAgICAgIGdyaWQtYXJlYTogaW1hZ2VjO1xcclxcbiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7XFxyXFxuICAgICAgICAgICAgd2lkdGg6IDEwMHB4O1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIDpob3N0KC5wb3B1bGF0ZWQpIHtcXHJcXG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgc2xvdFtuYW1lPVxcXCJ1cHBlci10ZXh0XFxcIl0ge1xcclxcbiAgICAgICAgZ3JpZC1hcmVhOiB1cHBlcnRleHRjO1xcclxcbiAgICAgICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IHVwcGVydGV4dGw7XFxyXFxuICAgICAgICBncmlkLWNvbHVtbi1lbmQ6IHVwcGVydGV4dHI7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgc2xvdFtuYW1lPVxcXCJsb3dlci10ZXh0XFxcIl0ge1xcclxcbiAgICAgICAgZ3JpZC1hcmVhOiBsb3dlcnRleHRjO1xcclxcbiAgICAgICAgZ3JpZC1jb2x1bW4tc3RhcnQ6IGxvd2VydGV4dGw7XFxyXFxuICAgICAgICBncmlkLWNvbHVtbi1lbmQ6IGxvd2VydGV4dHI7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgc2xvdFtuYW1lPVxcXCJ1cHBlci10ZXh0XFxcIl0sXFxyXFxuICAgIHNsb3RbbmFtZT1cXFwibG93ZXItdGV4dFxcXCJdIHtcXHJcXG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcclxcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xcclxcbiAgICAgICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtcGFyYWdyYXBoLXNtYWxsKTtcXHJcXG4gICAgICAgIHRleHQtd3JhcDogbm93cmFwO1xcclxcbiAgICAgICAgYW5pbWF0aW9uOiBkbkZhZGVJbk91dFJlcGVhdCAyLjVzIGluZmluaXRlO1xcclxcblxcclxcbiAgICAgICAgcCB7XFxyXFxuICAgICAgICAgICAgcGFkZGluZzogMDtcXHJcXG4gICAgICAgICAgICBtYXJnaW46IDA7XFxyXFxuICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtcGFyYWdyYXBoLXNtYWxsKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbjwvc3R5bGU+XCIiLCJpbXBvcnQgRGlnaXRhbE5hdHVyZVdlYkNvbXBvbmVudCBmcm9tIFwiQGRpZ2l0YWwtbmF0dXJlLWx0ZC93ZWItY29tcG9uZW50XCI7XHJcbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL2RpZ2l0YWwtbmF0dXJlLWxvYWRpbmctb3ZlcmxheS1jb21wb25lbnQtdGVtcGxhdGUuaHRtbD9yYXcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlnaXRhbE5hdHVyZUxvYWRpbmdPdmVybGF5Q29tcG9uZW50IGV4dGVuZHMgRGlnaXRhbE5hdHVyZVdlYkNvbXBvbmVudFxyXG57XHJcbiAgICBzdGF0aWMgdGFnTmFtZSA9ICdkaWdpdGFsLW5hdHVyZS1sb2FkaW5nLW92ZXJsYXknO1xyXG5cclxuICAgIG1lc3NhZ2VzID0gW107XHJcbiAgICBtZXNzYWdlUG9zaXRpb24gPSAnbG93ZXInO1xyXG4gICAgY3VycmVudE1lc3NhZ2UgPSBudWxsO1xyXG4gICAgbWVzc2FnZUNsYXNzID0gJ2RuLWxvYWRpbmctb3ZlcmxheV9fbWVzc2FnZSdcclxuICAgIGN5Y2xlU3BlZWQgPSA1MDAwO1xyXG4gICAgY3ljbGVNZXNzYWdlc0ludGVydmFsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcclxuICAgICAgICBzdXBlcih7dGVtcGxhdGU6IHRlbXBsYXRlLCAuLi5vcHRpb25zfSk7XHJcblxyXG4gICAgICAgIC8vIGFkZCB0aGUgbWVzc2FnZXMgYW5kIHBvc2l0aW9uIHRvIHRoZSBjb21wb25lbnQgcHJvcGVydGllc1xyXG4gICAgICAgIGxldCBtZXNzYWdlc1Bhc3NlZEluID0gdGhpcy5kYXRhc2V0Lm1lc3NhZ2VzID8gSlNPTi5wYXJzZSh0aGlzLmRhdGFzZXQubWVzc2FnZXMpOiBbXTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VQb3NpdGlvbiA9IHRoaXMuZGF0YXNldC5tZXNzYWdlUG9zaXRpb24gPyB0aGlzLmRhdGFzZXQubWVzc2FnZVBvc2l0aW9uIDogJ2xvd2VyJztcclxuICAgICAgICB0aGlzLmN5Y2xlU3BlZWQgPSB0aGlzLmRhdGFzZXQuY3ljbGVTcGVlZCA/IHRoaXMuZGF0YXNldC5jeWNsZVNwZWVkIDogNTAwMDtcclxuXHJcbiAgICAgICAgLy8gZG9uJ3QgY29uZmlndXJlIGlmIHRoZXJlIGFyZSBubyBtZXNzYWdlc1xyXG4gICAgICAgIGlmIChtZXNzYWdlc1Bhc3NlZEluLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8gYWRkIGFsbCB0aGUgbWVzc2FnZXMsIHRoaXMgd2lsbCB0cmlnZ2VyIHRoZSBpbnRlcnZhbFxyXG4gICAgICAgIG1lc3NhZ2VzUGFzc2VkSW4uZm9yRWFjaChtZXNzYWdlID0+IHtcclxuICAgICAgICAgICAgY29tcG9uZW50LmFkZE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEludGVydmFsKClcclxuICAgIHtcclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gdGhpcztcclxuXHJcbiAgICAgICAgLy8gYWRkIHRoZSBpbml0aWFsIG1lc3NhZ2VcclxuICAgICAgICB0aGlzLmRpc3BsYXlOZXh0TWVzc2FnZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmN5Y2xlTWVzc2FnZXNJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29tcG9uZW50LmRpc3BsYXlOZXh0TWVzc2FnZSgpO1xyXG4gICAgICAgIH0sIHRoaXMuY3ljbGVTcGVlZClcclxuICAgIH1cclxuXHJcbiAgICBnZXROZXh0TWVzc2FnZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5tZXNzYWdlcy5pbmRleE9mKHRoaXMuY3VycmVudE1lc3NhZ2UpO1xyXG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIHRoaXMubWVzc2FnZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc1tuZXh0SW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyTWVzc2FnZSgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMubWVzc2FnZUNsYXNzfWApO1xyXG5cclxuICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBtZXNzYWdlLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5TmV4dE1lc3NhZ2UoKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHNldCB0aGUgY3VycmVudCBtZXNzYWdlIHRvIHRoZSBuZXh0IG9uZVxyXG4gICAgICAgIHRoaXMuY3VycmVudE1lc3NhZ2UgPSB0aGlzLmdldE5leHRNZXNzYWdlKCk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIHdoYXQgd2UgYWxyZWFkeSBoYXZlXHJcbiAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2UoKVxyXG5cclxuICAgICAgICAvLyBidWlsZCB0aGUgbmV3IG1lc3NhZ2VcclxuICAgICAgICBsZXQgY3VycmVudE1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjdXJyZW50TWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMubWVzc2FnZUNsYXNzKTtcclxuICAgICAgICBjdXJyZW50TWVzc2FnZS5zbG90ID0gdGhpcy5tZXNzYWdlUG9zaXRpb24gPT09ICd1cHBlcicgPyAndXBwZXItdGV4dCcgOiAnbG93ZXItdGV4dCc7XHJcbiAgICAgICAgY3VycmVudE1lc3NhZ2UudGV4dENvbnRlbnQgPSB0aGlzLmN1cnJlbnRNZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoY3VycmVudE1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZU1lc3NhZ2UobWVzc2FnZVRleHQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUluZGV4ID0gdGhpcy5tZXNzYWdlcy5pbmRleE9mKG1lc3NhZ2VUZXh0KTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzLnNwbGljZShtZXNzYWdlSW5kZXgsIDEpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1bGF0ZWQnKTtcclxuICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGludGVydmFsXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jeWNsZU1lc3NhZ2VzSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBlbGVtZW50XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZE1lc3NhZ2UobWVzc2FnZVRleHQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdwb3B1bGF0ZWQnKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUluZGV4ID0gdGhpcy5tZXNzYWdlcy5pbmRleE9mKG1lc3NhZ2VUZXh0KTtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2VJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgLy8gdGhlIG1lc3NhZ2UgYWxyZWFkeSBleGlzdHNcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2VUZXh0KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmN5Y2xlTWVzc2FnZXNJbnRlcnZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0SW50ZXJ2YWwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vLyBhZGQgdGhlIGN1c3RvbSBlbGVtZW50IHRvIHRoZSByZWdpc3RyeVxyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoRGlnaXRhbE5hdHVyZUxvYWRpbmdPdmVybGF5Q29tcG9uZW50LnRhZ05hbWUsIERpZ2l0YWxOYXR1cmVMb2FkaW5nT3ZlcmxheUNvbXBvbmVudCk7IiwiZXhwb3J0IGRlZmF1bHQgXCI8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlLWNvbnRhaW5lclxcXCIgdGl0bGU9XFxcIkNsaWNrIHRvIGRpc21pc3MgdGhpcyBtZXNzYWdlXFxcIj5cXHJcXG4gICAgPHNsb3QgbmFtZT1cXFwibWVzc2FnZVxcXCI+PC9zbG90PlxcclxcbjwvZGl2PlxcclxcbjxzbG90IG5hbWU9XFxcImRpc21pc3MtYnV0dG9uXFxcIj5cXHJcXG4gICAgPGJ1dHRvbj48L2J1dHRvbj5cXHJcXG48L3Nsb3Q+XFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuPHN0eWxlPlxcclxcbiAgICA6aG9zdCB7XFxyXFxuICAgICAgICAtLW1lc3NhZ2UtYmFja2dyb3VuZC1jb2xvdXI6ICNGRkY7XFxyXFxuICAgICAgICAtLW1lc3NhZ2UtYm9yZGVyLWNvbG91cjogIzAwMDtcXHJcXG4gICAgICAgIC0tbWVzc2FnZS1ib3JkZXItcmFkaXVzOiAwLjVyZW07XFxyXFxuICAgICAgICAtLW1lc3NhZ2UtYm9yZGVyLXdpZHRoOiAycHg7XFxyXFxuICAgICAgICAtLW1lc3NhZ2UtYm9yZGVyLXN0eWxlOiBzb2xpZDtcXHJcXG4gICAgICAgIC0tbWVzc2FnZS1mb250LXdlaWdodDogNDAwO1xcclxcbiAgICAgICAgLS1tZXNzYWdlLW1hcmdpbjogMXJlbSAwO1xcclxcbiAgICAgICAgLS1tZXNzYWdlLWdyaWQtc2l6ZTogM3JlbSBhdXRvIDMwcHg7XFxyXFxuICAgICAgICAtLW1lc3NhZ2UtZ3JpZC1yb3dzOiBhdXRvO1xcclxcbiAgICAgICAgLS1tZXNzYWdlLWdyaWQtYXJlYXM6IFxcXCJpY29uIG1lc3NhZ2UgY2xvc2VcXFwiO1xcclxcbiAgICAgICAgLS1tZXNzYWdlLWdyaWQtYXJlYXMtZ2FwOiAxcmVtO1xcclxcbiAgICAgICAgLS1tZXNzYWdlLWN1cnNvcjogcG9pbnRlcjtcXHJcXG4gICAgICAgIC0tbWVzc2FnZS1mb250LXNpemU6IDFyZW07XFxyXFxuXFxyXFxuICAgICAgICAtLWJ1dHRvbi1iYWNrZ3JvdW5kLWNvbG91cjogI0ZGRjtcXHJcXG4gICAgICAgIC0tYnV0dG9uLWJhY2tncm91bmQtc2l6ZTogMjBweDtcXHJcXG4gICAgICAgIC0tYnV0dG9uLWltYWdlLWJhY2tncm91bmQtdXJsOiB1cmwoYXNzZXRzL2ltZy9jbG9zZS5zdmcpO1xcclxcbiAgICAgICAgLS1idXR0b24taW1hZ2UtYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcXHJcXG4gICAgICAgIC0tYnV0dG9uLWltYWdlLWJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7XFxyXFxuICAgICAgICAtLWJ1dHRvbi1vcGFjaXR5OiAwLjU7XFxyXFxuXFxyXFxuICAgICAgICAtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC1jb2xvdXI6ICMwMDA7XFxyXFxuICAgICAgICAtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC11cmw6IHVuc2V0O1xcclxcbiAgICAgICAgLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxyXFxuICAgICAgICAtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcXHJcXG4gICAgICAgIC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXNpemU6IGF1dG87XFxyXFxuICAgICAgICAtLWRlZmF1bHQtYm9yZGVyLWNvbG91cjogIzAwMDtcXHJcXG4gICAgICAgIC0tZGVmYXVsdC1mb250LWNvbG91cjogIzAwMDtcXHJcXG5cXHJcXG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XFxyXFxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHZhcigtLW1lc3NhZ2UtZ3JpZC1zaXplKTtcXHJcXG4gICAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogdmFyKC0tbWVzc2FnZS1ncmlkLXJvd3MpO1xcclxcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczogdmFyKC0tbWVzc2FnZS1ncmlkLWFyZWFzKTtcXHJcXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxuICAgICAgICBnYXA6IHZhcigtLW1lc3NhZ2UtZ3JpZC1hcmVhcy1nYXApO1xcclxcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgICAgICAgY3Vyc29yOiB2YXIoLS1tZXNzYWdlLWN1cnNvcik7XFxyXFxuXFxyXFxuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1tZXNzYWdlLWJhY2tncm91bmQtY29sb3VyKTtcXHJcXG4gICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tbWVzc2FnZS1mb250LXNpemUpO1xcclxcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1tZXNzYWdlLWJvcmRlci13aWR0aCkgdmFyKC0tbWVzc2FnZS1ib3JkZXItc3R5bGUpIHZhcigtLW1lc3NhZ2UtYm9yZGVyLWNvbG91cik7XFxyXFxuICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1tZXNzYWdlLWJvcmRlci1yYWRpdXMpO1xcclxcbiAgICAgICAgY29sb3I6IHZhcigtLWRlZmF1bHQtZm9udC1jb2xvdXIpO1xcclxcbiAgICAgICAgcGFkZGluZzogMDtcXHJcXG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XFxyXFxuICAgICAgICBtYXJnaW46IHZhcigtLW1lc3NhZ2UtbWFyZ2luKTtcXHJcXG4gICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1tZXNzYWdlLWZvbnQtd2VpZ2h0KTtcXHJcXG5cXHJcXG4gICAgICAgICY6YmVmb3JlIHtcXHJcXG4gICAgICAgICAgICBncmlkLWFyZWE6IGljb247XFxyXFxuICAgICAgICAgICAgY29udGVudDogXFxcIlxcXCI7XFxyXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxyXFxuICAgICAgICAgICAgYXNwZWN0LXJhdGlvOiAxIC8gMTtcXHJcXG4gICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtICgyICogdmFyKC0tbWVzc2FnZS1ib3JkZXItd2lkdGgpKSk7XFxyXFxuICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC1jb2xvdXIpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC11cmwpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcmVwZWF0KTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcG9zaXRpb24pO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMWVtO1xcclxcbiAgICAgICAgICAgIGJvcmRlcjogdmFyKC0tbWVzc2FnZS1ib3JkZXItd2lkdGgpIHNvbGlkIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG91cik7XFxyXFxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tbWVzc2FnZS1ib3JkZXItcmFkaXVzKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICA6aG9zdCg6aG92ZXIpIHtcXHJcXG4gICAgICAgIHNsb3RbbmFtZT1cXFwiZGlzbWlzcy1idXR0b25cXFwiXSB7XFxyXFxuICAgICAgICAgICAgYnV0dG9uIHtcXHJcXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgOmhvc3QoLnN1Y2Nlc3MpIHtcXHJcXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tc3VjY2Vzcy1ib3JkZXItY29sb3VyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvdXIpKTtcXHJcXG4gICAgICAgIGNvbG9yOiB2YXIoLS1zdWNjZXNzLWZvbnQtY29sb3VyLCB2YXIoLS1kZWZhdWx0LWZvbnQtY29sb3VyKSk7XFxyXFxuXFxyXFxuICAgICAgICAmOmJlZm9yZSB7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VjY2Vzcy1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91ciwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91cikpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLXN1Y2Nlc3MtaW1hZ2UtYmFja2dyb3VuZC11cmwsIHZhcigtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC11cmwpKTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogdmFyKC0tc3VjY2Vzcy1pbWFnZS1iYWNrZ3JvdW5kLXJlcGVhdCwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXJlcGVhdCkpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IHZhcigtLXN1Y2Nlc3MtaW1hZ2UtYmFja2dyb3VuZC1wb3NpdGlvbiwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXBvc2l0aW9uKSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiB2YXIoLS1zdWNjZXNzLWltYWdlLWJhY2tncm91bmQtc2l6ZSwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXNpemUpKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcblxcclxcbiAgICA6aG9zdCguZXJyb3IpIHtcXHJcXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZXJyb3ItYm9yZGVyLWNvbG91ciwgdmFyKC0tZGVmYXVsdC1ib3JkZXItY29sb3VyKSk7XFxyXFxuICAgICAgICBjb2xvcjogdmFyKC0tZXJyb3ItZm9udC1jb2xvdXIsIHZhcigtLWRlZmF1bHQtZm9udC1jb2xvdXIpKTtcXHJcXG5cXHJcXG4gICAgICAgICY6YmVmb3JlIHtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1lcnJvci1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91ciwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91cikpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLWVycm9yLWltYWdlLWJhY2tncm91bmQtdXJsLCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtdXJsKSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IHZhcigtLWVycm9yLWltYWdlLWJhY2tncm91bmQtcmVwZWF0LCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcmVwZWF0KSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogdmFyKC0tZXJyb3ItaW1hZ2UtYmFja2dyb3VuZC1wb3NpdGlvbiwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXBvc2l0aW9uKSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiB2YXIoLS1lcnJvci1pbWFnZS1iYWNrZ3JvdW5kLXNpemUsIHZhcigtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC1zaXplKSk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgOmhvc3QoLndhcm5pbmcpIHtcXHJcXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0td2FybmluZy1ib3JkZXItY29sb3VyLCB2YXIoLS1kZWZhdWx0LWJvcmRlci1jb2xvdXIpKTtcXHJcXG4gICAgICAgIGNvbG9yOiB2YXIoLS13YXJuaW5nLWZvbnQtY29sb3VyLCB2YXIoLS1kZWZhdWx0LWZvbnQtY29sb3VyKSk7XFxyXFxuXFxyXFxuICAgICAgICAmOmJlZm9yZSB7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td2FybmluZy1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91ciwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLWNvbG91cikpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLXdhcm5pbmctaW1hZ2UtYmFja2dyb3VuZC11cmwsIHZhcigtLWRlZmF1bHQtaW1hZ2UtYmFja2dyb3VuZC11cmwpKTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogdmFyKC0td2FybmluZy1pbWFnZS1iYWNrZ3JvdW5kLXJlcGVhdCwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXJlcGVhdCkpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IHZhcigtLXdhcm5pbmctaW1hZ2UtYmFja2dyb3VuZC1wb3NpdGlvbiwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXBvc2l0aW9uKSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiB2YXIoLS13YXJuaW5nLWltYWdlLWJhY2tncm91bmQtc2l6ZSwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXNpemUpKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICA6aG9zdCguaW5mbykge1xcclxcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbmZvLWJvcmRlci1jb2xvdXIsIHZhcigtLWRlZmF1bHQtYm9yZGVyLWNvbG91cikpO1xcclxcbiAgICAgICAgY29sb3I6IHZhcigtLWluZm8tZm9udC1jb2xvdXIsIHZhcigtLWRlZmF1bHQtZm9udC1jb2xvdXIpKTtcXHJcXG5cXHJcXG4gICAgICAgICY6YmVmb3JlIHtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvLWltYWdlLWJhY2tncm91bmQtY29sb3VyLCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtY29sb3VyKSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdmFyKC0taW5mby1pbWFnZS1iYWNrZ3JvdW5kLXVybCwgdmFyKC0tZGVmYXVsdC1pbWFnZS1iYWNrZ3JvdW5kLXVybCkpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiB2YXIoLS1pbmZvLWltYWdlLWJhY2tncm91bmQtcmVwZWF0LCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcmVwZWF0KSk7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogdmFyKC0taW5mby1pbWFnZS1iYWNrZ3JvdW5kLXBvc2l0aW9uLCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtcG9zaXRpb24pKTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IHZhcigtLWluZm8taW1hZ2UtYmFja2dyb3VuZC1zaXplLCB2YXIoLS1kZWZhdWx0LWltYWdlLWJhY2tncm91bmQtc2l6ZSkpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC5tZXNzYWdlLWNvbnRhaW5lciB7XFxyXFxuICAgICAgICBwYWRkaW5nOiAxcmVtIDA7XFxyXFxuICAgICAgICBncmlkLWFyZWE6IG1lc3NhZ2U7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgc2xvdFtuYW1lPVxcXCJkaXNtaXNzLWJ1dHRvblxcXCJdIHtcXHJcXG4gICAgICAgIGdyaWQtYXJlYTogY2xvc2U7XFxyXFxuXFxyXFxuICAgICAgICAmOmhvdmVyIHtcXHJcXG4gICAgICAgICAgICBidXR0b24ge1xcclxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGJ1dHRvbiB7XFxyXFxuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xcclxcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gICAgICAgICAgICBmb250LXNpemU6IDA7XFxyXFxuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XFxyXFxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xcclxcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XFxyXFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnV0dG9uLWJhY2tncm91bmQtY29sb3VyKTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB2YXIoLS1idXR0b24taW1hZ2UtYmFja2dyb3VuZC11cmwpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiB2YXIoLS1idXR0b24taW1hZ2UtYmFja2dyb3VuZC1yZXBlYXQpO1xcclxcbiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IHZhcigtLWJ1dHRvbi1pbWFnZS1iYWNrZ3JvdW5kLXBvc2l0aW9uKTtcXHJcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IHZhcigtLWJ1dHRvbi1iYWNrZ3JvdW5kLXNpemUpO1xcclxcbiAgICAgICAgICAgIG9wYWNpdHk6IHZhcigtLWJ1dHRvbi1vcGFjaXR5KTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbjwvc3R5bGU+XCIiLCJpbXBvcnQgRGlnaXRhbE5hdHVyZVdlYkNvbXBvbmVudCBmcm9tIFwiQGRpZ2l0YWwtbmF0dXJlLWx0ZC93ZWItY29tcG9uZW50XCI7XHJcbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL2RpZ2l0YWwtbmF0dXJlLWRpc21pc3NhYmxlLW1lc3NhZ2UtY29tcG9uZW50LXRlbXBsYXRlLmh0bWw/cmF3JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpZ2l0YWxOYXR1cmVEaXNtaXNzYWJsZU1lc3NhZ2VDb21wb25lbnQgZXh0ZW5kcyBEaWdpdGFsTmF0dXJlV2ViQ29tcG9uZW50XHJcbntcclxuICAgIHN0YXRpYyB0YWdOYW1lID0gJ2RpZ2l0YWwtbmF0dXJlLWRpc21pc3NhYmxlLW1lc3NhZ2UnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIHN1cGVyKHt0ZW1wbGF0ZTogdGVtcGxhdGUsIC4uLm9wdGlvbnN9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2sgKGV2ZW50KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGFkZCB0aGUgY3VzdG9tIGVsZW1lbnQgdG8gdGhlIHJlZ2lzdHJ5XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZShEaWdpdGFsTmF0dXJlRGlzbWlzc2FibGVNZXNzYWdlQ29tcG9uZW50LnRhZ05hbWUsIERpZ2l0YWxOYXR1cmVEaXNtaXNzYWJsZU1lc3NhZ2VDb21wb25lbnQpOyIsImV4cG9ydCBkZWZhdWx0IFwiPGRpdiBjbGFzcz1cXFwiZGlnaXRhbC1uYXR1cmUtYWRtaW4td3JhcFxcXCI+XFxyXFxuICAgIDxsaW5rIHJlbD1cXFwic3R5bGVzaGVldFxcXCIgaHJlZj1cXFwiaHR0cHM6Ly9zYW5kYm94LmxvY2FsL3dwLWNvbnRlbnQvcGx1Z2lucy9kbi11dGlsaXRpZXMvYXNzZXRzL2FkbWluL2Nzcy9hZG1pbi5jc3NcXFwiIG1lZGlhPVxcXCJhbGxcXFwiPlxcclxcbiAgICA8bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIGhyZWY9XFxcImh0dHBzOi8vc2FuZGJveC5sb2NhbC93cC1jb250ZW50L3BsdWdpbnMvZG4tdXRpbGl0aWVzL2Fzc2V0cy9jb21tb24vY3NzL2NvbW1vbi5jc3NcXFwiIG1lZGlhPVxcXCJhbGxcXFwiPlxcclxcbiAgICA8bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIGhyZWY9XFxcImh0dHBzOi8vc2FuZGJveC5sb2NhbC93cC1jb250ZW50L3BsdWdpbnMvZG4tdG9vbHMtZm9yLWtsYXZpeW8vYXNzZXRzL2FkbWluL2Nzcy9hZG1pbi5jc3NcXFwiIG1lZGlhPVxcXCJhbGxcXFwiPlxcclxcblxcclxcbiAgICA8bGFiZWwgZm9yPVxcXCJrbGF2aXlvLWV2ZW50LWNyZWF0ZS10ZXN0LWV2ZW50LW5hbWVcXFwiPkV2ZW50IE5hbWU8L2xhYmVsPlxcclxcbiAgICA8aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgbmFtZT1cXFwiZXZlbnQtbmFtZVxcXCIgdmFsdWU9XFxcIkEgdGVzdCBldmVudFxcXCIgaWQ9XFxcImtsYXZpeW8tZXZlbnQtY3JlYXRlLXRlc3QtZXZlbnQtbmFtZVxcXCIgLz5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwia2xhdml5by1ldmVudC1jcmVhdGUtdGVzdC1zdWJtaXRcXFwiIHR5cGU9XFxcInN1Ym1pdFxcXCI+VGVzdDwvYnV0dG9uPlxcclxcblxcclxcbiAgICA8ZGlnaXRhbC1uYXR1cmUtZGlzbWlzc2FibGUtbWVzc2FnZSBjbGFzcz1cXFwic3VjY2Vzc1xcXCI+XFxyXFxuICAgICAgICA8cCBzbG90PVxcXCJtZXNzYWdlXFxcIj5UaGlzIGlzIGEgZGlzbWlzc2FibGUgbWVzc2FnZSBidXQgdGhlIHN0eWxpbmcgaGFzIGdvbmUgdG8gdHVyZC4gSXQgYWxzbyBoYXMgbm8gYmFja2dyb3VuZCBpbWFnZS4gVGhlIGNzcyB2YXJzIGFyZSBpbiB0aGUgZG4tdXRpbGl0aWVzIHBsdWdpbiwgZmluZCBvdXQgd2hhdCB0aGUgcHJvYmxlbSBpczwvcD5cXHJcXG4gICAgPC9kaWdpdGFsLW5hdHVyZS1kaXNtaXNzYWJsZS1tZXNzYWdlPlxcclxcbjwvZGl2PlwiIiwiaW1wb3J0IERpZ2l0YWxOYXR1cmVXZWJDb21wb25lbnQgZnJvbSBcIkBkaWdpdGFsLW5hdHVyZS1sdGQvd2ViLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgRGlnaXRhbE5hdHVyZUxvYWRpbmdPdmVybGF5Q29tcG9uZW50IGZyb20gXCJAZGlnaXRhbC1uYXR1cmUtbHRkL2xvYWRpbmctb3ZlcmxheS1jb21wb25lbnRcIjtcclxuaW1wb3J0IERpZ2l0YWxOYXR1cmVEaXNtaXNzYWJsZU1lc3NhZ2VDb21wb25lbnQgZnJvbSBcIkBkaWdpdGFsLW5hdHVyZS1sdGQvZGlzbWlzc2FibGUtbWVzc2FnZS1jb21wb25lbnRcIjtcclxuaW1wb3J0IHRlbXBsYXRlIGZyb20gXCIuL3Rlc3QtZXZlbnQtY3JlYXRlLWNvbXBvbmVudC10ZW1wbGF0ZS5odG1sP3Jhd1wiXHJcblxyXG5jbGFzcyBUZXN0S2xhdml5b0V2ZW50Q3JlYXRlIGV4dGVuZHMgRGlnaXRhbE5hdHVyZVdlYkNvbXBvbmVudFxyXG57XHJcbiAgICBzdGF0aWMgdGFnTmFtZSA9ICd0b29scy1mb3Ita2xhdml5by10ZXN0LWV2ZW50LWNyZWF0ZSc7XHJcbiAgICAvLyBvYnNlcnZlZCBhdHRyaWJ1dGVzIHdpbGwgdHJpZ2dlciB0aGUgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXHJcbiAgICBzdGF0aWMgb2JzZXJ2ZWRBdHRyaWJ1dGVzID0gWydldmVudC1uYW1lJ107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoe1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGFzc2lnbiBlbGVtZW50cyB0byB2YXJzXHJcbiAgICAgICAgY29uc3QgYnRuID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdrbGF2aXlvLWV2ZW50LWNyZWF0ZS10ZXN0LXN1Ym1pdCcpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZUlucHV0ID0gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKCdrbGF2aXlvLWV2ZW50LWNyZWF0ZS10ZXN0LWV2ZW50LW5hbWUnKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGxpc3RlbmVyc1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2V2ZW50LW5hbWUnLCBldmVudE5hbWVJbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucnVuVGVzdCgpLnRoZW4ociA9PiB7fSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBydW5UZXN0KClcclxuICAgIHtcclxuICAgICAgICBsZXQgbG9hZGluZ01lc3NhZ2VzID0gW1xyXG4gICAgICAgICAgICAnU2VuZGluZyBkYXRhLCBwbGVhc2Ugd2FpdC4uLicsXHJcbiAgICAgICAgICAgICdQcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4uLicsXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBsZXQgbG9hZGluZ092ZXJsYXkgPSBEaWdpdGFsTmF0dXJlTG9hZGluZ092ZXJsYXlDb21wb25lbnQuY3JlYXRlKCk7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGFsbCBEaWdpdGFsTmF0dXJlTG9hZGluZ092ZXJsYXlDb21wb25lbnQgZnJvbSB0aGlzLnNoYWRvd1Jvb3RcclxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvckFsbChEaWdpdGFsTmF0dXJlTG9hZGluZ092ZXJsYXlDb21wb25lbnQudGFnTmFtZSkuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcbiAgICAgICAgLy8gYWRkIHRoZSBuZXcgbG9hZGluZyBvdmVybGF5XHJcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKGxvYWRpbmdPdmVybGF5KTtcclxuICAgICAgICAvLyBhZGQgbWVzc2FnZXMgdG8gdGhlIGxvYWRpbmcgb3ZlcmxheVxyXG4gICAgICAgIGxvYWRpbmdNZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gbG9hZGluZ092ZXJsYXkuYWRkTWVzc2FnZShtZXNzYWdlKSk7XHJcblxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLnJlcXVlc3QucG9zdChcclxuICAgICAgICAgICAgYC93cC1qc29uL3Rvb2xzLWZvci1rbGF2aXlvL3YxL2V2ZW50c2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB0aGlzLmdldEF0dHJpYnV0ZSgnZXZlbnQtbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgXCJldmVudC1kYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAnc2VuZCc6ICdzdWNjZXNzJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3BvbnNlIGlzJywgcmVzcG9uc2UpO1xyXG5cclxuICAgICAgICBsb2FkaW5nTWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IGxvYWRpbmdPdmVybGF5LmRlbGV0ZU1lc3NhZ2UobWVzc2FnZSkpO1xyXG5cclxuICAgICAgICBsZXQgcmVzcG9uc2VNZXNzYWdlID0gRGlnaXRhbE5hdHVyZURpc21pc3NhYmxlTWVzc2FnZUNvbXBvbmVudC5jcmVhdGUoKTtcclxuICAgICAgICByZXNwb25zZU1lc3NhZ2Uuc2V0U2xvdFRleHRDb250ZW50KCdtZXNzYWdlJywgJ1N1Y2Nlc3MhIFlvdXIgZXZlbnQgd2FzIHNlbnQgdG8gS2xhdml5byEnKTtcclxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQocmVzcG9uc2VNZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gYWRkIHRoZSBjdXN0b20gZWxlbWVudCB0byB0aGUgcmVnaXN0cnlcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFRlc3RLbGF2aXlvRXZlbnRDcmVhdGUudGFnTmFtZSwgVGVzdEtsYXZpeW9FdmVudENyZWF0ZSk7Il0sIm5hbWVzIjpbIl9EaWdpdGFsTmF0dXJlV2ViQ29tcG9uZW50X2luc3RhbmNlcyIsImdldFNsb3RCeU5hbWVfZm4iLCJEaWdpdGFsTmF0dXJlV2ViQ29tcG9uZW50Iiwib3B0aW9ucyIsIl9fcHJpdmF0ZUFkZCIsIl9fcHVibGljRmllbGQiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJzbG90TmFtZSIsImVsZW1lbnQiLCJzbG90IiwiX19wcml2YXRlTWV0aG9kIiwiY29udGVudCIsImV2ZW50IiwiY2FwaXRhbGlzZWRFdmVudFR5cGUiLCJ0ZW1wbGF0ZSQyIiwiRGlnaXRhbE5hdHVyZUxvYWRpbmdPdmVybGF5Q29tcG9uZW50IiwidGVtcGxhdGUiLCJtZXNzYWdlc1Bhc3NlZEluIiwiY29tcG9uZW50IiwibWVzc2FnZSIsIm5leHRJbmRleCIsImN1cnJlbnRNZXNzYWdlIiwibWVzc2FnZVRleHQiLCJtZXNzYWdlSW5kZXgiLCJ0ZW1wbGF0ZSQxIiwiRGlnaXRhbE5hdHVyZURpc21pc3NhYmxlTWVzc2FnZUNvbXBvbmVudCIsIlRlc3RLbGF2aXlvRXZlbnRDcmVhdGUiLCJidG4iLCJldmVudE5hbWVJbnB1dCIsInIiLCJsb2FkaW5nTWVzc2FnZXMiLCJsb2FkaW5nT3ZlcmxheSIsImVsIiwicmVzcG9uc2UiLCJyZXNwb25zZU1lc3NhZ2UiXSwibWFwcGluZ3MiOiJnWkFBZSxJQUFBQSxFQUFBQyxFQUFBLE1BQU1DLFVBQWtDLFdBQ3ZELENBT0ksWUFBWUMsRUFBVSxHQUFJLENBQ3RCLFFBVE9DLEVBQUEsS0FBQUosR0FFWEssRUFBQSxlQUFVLENBQ04sU0FBVSxLQUNWLEtBQU0sT0FDTixhQUFjLEVBQ2pCLEdBTUcsUUFBSyxRQUFVLENBQUMsR0FBRyxLQUFLLFFBQVMsR0FBR0YsQ0FBTyxFQUV2QyxLQUFLLFFBQVEsY0FDYixLQUFLLGFBQWEsQ0FBQyxLQUFNLEtBQUssUUFBUSxJQUFJLENBQUMsRUFHM0MsS0FBSyxRQUFRLFNBQVUsQ0FFdkIsSUFBSUcsRUFBa0IsU0FBUyxjQUFjLFVBQVUsRUFDdkRBLEVBQWdCLFVBQVksS0FBSyxRQUFRLFNBQ3pDLEtBQUssV0FBVyxZQUFZQSxFQUFnQixRQUFRLFVBQVUsRUFBSSxDQUFDLENBQ3RFLENBQ0osQ0FFRCxPQUFPLE9BQU9ILEVBQVUsQ0FBRSxFQUMxQixDQUNJLEdBQUksQ0FBQyxLQUFLLFFBQ04sTUFBTSxJQUFJLE1BQU0sd0JBQXdCLEVBRzVDLE9BQU8sSUFBSSxLQUFL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
